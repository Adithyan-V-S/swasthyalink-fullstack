<!DOCTYPE html>
<html>
<head>
    <title>Clear Local Notifications</title>
</head>
<body>
    <h1>Clear Local Notifications</h1>
    <button onclick="clearAll()">Clear All Local Data</button>
    <button onclick="showData()">Show Current Data</button>
    <div id="output"></div>

    <script>
        function clearAll() {
            // Clear all localStorage
            localStorage.clear();
            
            // Clear all sessionStorage
            sessionStorage.clear();
            
            // Clear IndexedDB
            if ('indexedDB' in window) {
                indexedDB.deleteDatabase('firebaseLocalStorageDb');
                indexedDB.deleteDatabase('firebase-installations-database');
                indexedDB.deleteDatabase('firebase-messaging-database');
            }
            
            // Clear specific notification keys
            localStorage.removeItem('localNotifications');
            localStorage.removeItem('shownNotificationIds');
            localStorage.removeItem('testUser');
            localStorage.removeItem('testUserRole');
            localStorage.removeItem('emergencyMode');
            
            document.getElementById('output').innerHTML = '<p style="color: green;">âœ… All local data cleared!</p>';
        }
        
        function showData() {
            const localNotifications = JSON.parse(localStorage.getItem('localNotifications') || '[]');
            const shownIds = JSON.parse(localStorage.getItem('shownNotificationIds') || '[]');
            const testUser = localStorage.getItem('testUser');
            const testUserRole = localStorage.getItem('testUserRole');
            
            let output = '<h3>Current Local Data:</h3>';
            output += '<p><strong>localNotifications:</strong> ' + localNotifications.length + ' items</p>';
            output += '<p><strong>shownNotificationIds:</strong> ' + shownIds.length + ' items</p>';
            output += '<p><strong>testUser:</strong> ' + (testUser ? 'Present' : 'None') + '</p>';
            output += '<p><strong>testUserRole:</strong> ' + (testUserRole || 'None') + '</p>';
            
            if (localNotifications.length > 0) {
                output += '<h4>Local Notifications:</h4><ul>';
                localNotifications.forEach(notif => {
                    output += '<li>' + notif.title + ' - ' + notif.message + '</li>';
                });
                output += '</ul>';
            }
            
            document.getElementById('output').innerHTML = output;
        }
        
        // Show current data on load
        showData();
    </script>
</body>
</html>
